<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Efference</title>
  <link rel="stylesheet" href="style.css">
  <link rel="icon" type="image/png" href="/images/logo.png">
  <script src="https://js.stripe.com/v3/"></script>
</head>
<body>
  <header>
    <a href="#" class="logo-link">
      <h1>Efference</h1>
    </a>
   <hr style="margin: 1em 1em .7em 1em">
    <nav>
      <ul class="nav-links">
        <li><a href="#mission" class="standard-button">Mission</a></li>
        <li><a href="#demo" class="standard-button">Model</a></li>
         <li><a href="#preorder" class="standard-button">Camera</a></li>
        <li><a href="#team" class="standard-button">Team</a></li>
      <!--  <li><a href="https://docs.efference.ai/" class="standard-button">API</a></li> -->
        <li><a href="https://app.efference.ai/login" class="standard-button">Sign-in</a></li>
      </ul>
    </nav>
  </header>

  <div class="hero-container">
    <video class="hero" autoplay loop muted playsinline>
      <source src="videos/compressed.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>

    <!-- Bottom-left tagline -->
    <div class="video-overlay">
      <h4>We help robots see like humans do</h4>
      <a href="https://www.youtube.com/@Efference" class="action-link">See it in action →</a>
    </div>

    <!-- Bottom-right icons -->
    <div class="social-icons">
      <a href="https://x.com/efferenceAI" aria-label="X (Twitter)" target="_blank" rel="noopener">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
          <path d="M18.244 2H21L13.5 10.53 22 22h-6.744l-5.32-6.95L3.756 22H1l8.06-9.01L2 2h6.744l4.77 6.23L18.244 2zm-2.37 18h1.71L7.2 4h-1.71l10.384 16z"/>
        </svg>
      </a>
      <a href="https://www.linkedin.com/company/efference" aria-label="LinkedIn" target="_blank" rel="noopener">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
          <path d="M4.98 3.5C4.98 4.88 3.86 6 2.5 6S0 4.88 0 3.5 1.12 1 2.5 1s2.48 1.12 2.48 2.5zM.5 8.5h4V23h-4V8.5zM8.5 8.5h3.83v1.98h.05c.53-1 1.83-2.05 3.77-2.05 4.03 0 4.77 2.65 4.77 6.1V23h-4v-6.5c0-1.55-.03-3.55-2.17-3.55-2.17 0-2.5 1.7-2.5 3.43V23h-3.75V8.5z"/>
        </svg>
      </a>
      <a href="mailto:gianluca@efference.ai" title="Email">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none"
            xmlns="http://www.w3.org/2000/svg">
          <rect x="2" y="4" width="20" height="16" stroke="black" stroke-width="2.5" fill="white"/>
          <path d="M3 5L12 12L21 5" stroke="black" stroke-width="2.5" fill="none"/>
        </svg>
      </a>
    </div>
  </div>

  <hr>

  <section id="mission" class="mission-section">
    <div class="mission-container">
      <div class="mission-left">
        <h3 class="mission-heading">Mission</h3>
        <h1 class="mission-title">
          Enabling autonomy through robotic vision you can trust.
        </h1>
      </div>

      <div class="mission-right">
        <p>
          Robots fail when their cameras fail. The 3D information they need to manipulate
          and navigate the environment is too often noisy, incomplete, and unreliable.
          Or, just simply too expensive.
        </p>
        <p>
          Level-5 autonomy, safe household robots, and dependable autonomous drones
          require vision that works everywhere; robustly, reliably, and like humans.
          The path forward is the same one humans use: a data-driven approach to perception.
        </p>
        <p>
          Efference is redefining robotic vision by building the most intelligent
          cameras on the market.
        </p>
      </div>
    </div>
  </section>

  <hr style="background: gray">

  <section id="demo" class="models-demo-section" style="border-bottom-width: 50px;margin-bottom: 40px;">
    <div class="models-demo-container">
      <div class="models-left">
        <h3 class="models-brand">Model</h3>
        <h1 class="models-title">Seeing the world in 3D</h1>
        <p class="models-description">
          Any two-dimensional image is consistent with an infinite number of possible 3D worlds. Determining which world is most likely is the fundamental problem of perception.
        </p>
        <p class="models-description">
          Our models solve this the way humans do, by selecting the most probable world using every available cue: shadows, perspective, occlusions, and much more. The result is clear, consistent 3D structure that you can actually train robots on.
        </p>
        <a href="https://karger.com/bbe/article-abstract/95/5/272/47302/Illusions-Delusions-and-Your-Backwards-Bayesian?redirectedFrom=fulltext" class="models-link">Learn more about perception →</a>
      </div>
      
      <div class="models-right">
        <div class="demo-container-new">
          <div class="demo-video-background">
            <video id="efferenceVideo" class="demo-video-bg" autoplay loop muted playsinline preload="auto">
              <source src="videos/d435i_rgb_web.mp4" type="video/mp4">
              Your browser does not support the video tag.
            </video>
          </div>
          
          <div class="demo-tabs">
            <button id="rgbTab" class="demo-tab active">RGB</button>
            <button id="intelTab" class="demo-tab">Intel</button>
            <button id="efferenceTab" class="demo-tab">Efference</button>
          </div>
        </div>
      </div>
    </div>
  </section>

   <hr style="background: gray">

  <section id="preorder" class="preorder-section">
    <div class="preorder-container">
      <div class="preorder-left">
        <h3 class="preorder-heading">Camera</h3>
        <h1 class="mission-title">H-01</h1>
        <div class="camera-description">
          <p>The H-01 is a passive stereo camera modeled on the constraints of human vision. Two global-shutter 5 MP sensors capture high-speed RGBD video — 2560×1440 at 30 fps, 1080p at 60 fps, and 720p at 120 fps.</p>
          
          <p>A 60 mm baseline, matching human interpupillary distance, is integrated into a 100 × 30 × 30 mm enclosure. A 140° diagonal FOV and HDR imaging provide wide coverage and reliable performance in real-world lighting.</p>
          
          <p>To maintain stable depth during motion, the system incorporates dual 400 Hz IMUs that fuse inertial and visual information with extremely low latency. An automotive-grade GMSL2 interface enables long-distance, low-noise transmission to onboard compute.</p>
          
          <p>The design philosophy is simple: tasks performed by humans are optimized for the human visual system. H-01 brings that same geometry and sensing strategy to robotics.</p>
        </div>
        
        <button class="preorder-btn" onclick="openStripePopup()" style="margin-bottom: 35px;">Pre-order</button>
      </div>
      <div class="preorder-right">
        <div class="camera-slideshow">
          <img src="images/payment-success-email-header.png" alt="Efference H-01" class="camera-image active">
          <img src="images/cameraback.png" alt="Efference H-01 Back" class="camera-image">
        </div>
      </div>
    </div>
  </section> 

  <hr style="background: gray">

  <section id="team" class="team-section">
    <div class="team-container">
      <div class="team-left">
        <h3 class="team-heading">Team</h3>
      </div>

      <div class="team-right">
        <p>
          Efference is built by biologists, neuroscientists, and computer scientists who have worked on the first manned mission to Mars, visual perception and decision-making in primates, and uploading the first biological creature, a fruit fly, into a computer simulation.
        </p>
        
        <p>
          We are proudly supported by <a href="https://www.ycombinator.com/" target="_blank" rel="noopener">Y Combinator</a> and <a href="https://www.antifund.com/" target="_blank" rel="noopener">Anti Fund</a>.
        </p>
      </div>
    </div>
  </section>

  <hr style="background: gray">



  <footer>
    <div class="footer-links">
      <p>© 2025 Remnant Robotics, Inc. All rights reserved.</p>      
      <a href="https://x.com/efferenceAI" target="_blank" rel="noopener">X</a> · 
      <a href="https://www.linkedin.com/company/efference" target="_blank" rel="noopener">LinkedIn</a> · 
      <a href="mailto:gianluca@efference.ai">Contact</a>
    </div>
  </footer>

  <!-- Stripe Popup Modal -->
  <div id="stripeModal" class="stripe-modal">
    <div class="stripe-modal-content">
      <span class="stripe-close" onclick="closeStripePopup()">&times;</span>
      <div class="stripe-header">
        <h2>Efference H-01 Pre-order</h2>
        <p>Complete your purchase</p>
      </div>
      <div class="stripe-form">
        <div class="product-summary">
          <div class="product-info">
            <img src="images/payment-success-email-header.png" alt="Efference H-01" class="checkout-image">
            <div class="product-details">
              <h3>Efference H-01</h3>
              <p>Intelligent robotic vision camera</p>
            </div>
          </div>
          <div class="price-summary">
            <div class="price-line">
              <span>Original Price:</span>
              <span class="original">＄299.99</span>
            </div>
            <div class="price-line">
              <span>Pre-order Discount:</span>
              <span class="discount">-＄100.00</span>
            </div>
            <div class="price-line total">
              <span>Total:</span>
              <span class="total-price">＄199.99</span>
            </div>
          </div>
        </div>
        <div class="payment-form">
          <button id="checkout-button" class="stripe-pay-btn">Pre-order Now - ＄199.99</button>
          <p class="shipping-info">Ships in March</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Success Popup Modal -->
  <div id="successModal" class="success-modal">
    <div class="success-modal-content">
      <span class="success-close" onclick="closeSuccessPopup()">&times;</span>
      <h2>Payment Successful!</h2>
      <p>Thank you for your pre-order</p>
      <p>Expected shipping: March 2026</p>
      <button onclick="window.location.href = '/'" class="success-close-btn">Continue</button>
    </div>
  </div>

  <script>
    function openStripePopup() {
      document.getElementById('stripeModal').style.display = 'block';
      document.body.style.overflow = 'hidden';
    }

    function closeStripePopup() {
      document.getElementById('stripeModal').style.display = 'none';
      document.body.style.overflow = 'auto';
    }

    // Close modal when clicking outside
    window.onclick = function(event) {
      const modal = document.getElementById('stripeModal');
      if (event.target == modal) {
        closeStripePopup();
      }
    }
    
    document.getElementById('checkout-button').addEventListener('click', () => {
      window.location.href = 'https://buy.stripe.com/6oU14ogfW6h1ftMdxX33W00';
    });

    function closeSuccessPopup() {
      document.getElementById('successModal').style.display = 'none';
      document.body.style.overflow = 'auto';
      // Clean up URL parameter
      const url = new URL(window.location);
      url.searchParams.delete('payment_success');
      window.history.replaceState({}, '', url);
    }

    // Check for payment success parameter on page load
    document.addEventListener('DOMContentLoaded', function() {
      const urlParams = new URLSearchParams(window.location.search);
      if (urlParams.get('payment_success') === 'true') {
        document.getElementById('successModal').style.display = 'block';
        document.body.style.overflow = 'hidden';
      }
    });

    document.addEventListener('DOMContentLoaded', function() {
      const video = document.getElementById('efferenceVideo');
      const rgbTab = document.getElementById('rgbTab');
      const intelTab = document.getElementById('intelTab');
      const efferenceTab = document.getElementById('efferenceTab');

      // Force video autoplay on mobile
      function forceVideoPlay() {
        if (video && video.paused) {
          video.play().catch(function(error) {
            console.log('Autoplay failed:', error);
          });
        }
      }

      // Try to play video immediately
      forceVideoPlay();

      // Also try when user interacts with page
      document.addEventListener('touchstart', forceVideoPlay, { once: true });
      document.addEventListener('click', forceVideoPlay, { once: true });

      // Use Intersection Observer to play when video comes into view
      if ('IntersectionObserver' in window) {
        const observer = new IntersectionObserver(function(entries) {
          entries.forEach(function(entry) {
            if (entry.isIntersecting) {
              forceVideoPlay();
            }
          });
        }, { threshold: 0.5 });
        
        observer.observe(video);
      }

      // Create hidden video elements for preloading
      const videos = {};
      const videoSources = {
        rgb: 'videos/d435i_rgb_web.mp4',
        intel: 'videos/d435i_orig_web.mp4',
        efference: 'videos/d435i_clean_web.mp4'
      };

      // Create and preload all videos
      Object.keys(videoSources).forEach(function(key) {
        const videoElement = document.createElement('video');
        videoElement.src = videoSources[key];
        videoElement.loop = true;
        videoElement.muted = true;
        videoElement.playsInline = true;
        videoElement.preload = 'auto';
        videos[key] = videoElement;
        
        // Start playing all videos immediately
        videoElement.play().catch(function(error) {
          console.log('Video preload play failed for', key, error);
        });
      });

      function switchVideo(videoKey) {
        const selectedVideo = videos[videoKey];
        if (video && selectedVideo) {
          // Store current time before switching
          const currentTime = selectedVideo.currentTime;
          
          // Add fade out effect
          video.classList.add('fade-out');
          
          // Wait for fade out to complete, then switch video
          setTimeout(function() {
            // Switch source and maintain timing
            video.src = selectedVideo.src;
            video.currentTime = currentTime;
            
            // Remove fade out class to fade back in
            video.classList.remove('fade-out');
            
            // Ensure video plays on mobile
            video.load();
            const playPromise = video.play();
            if (playPromise !== undefined) {
              playPromise.catch(function(error) {
                console.log('Video play failed:', error);
                // Fallback: try to play again after a short delay
                setTimeout(() => {
                  video.play().catch(e => console.log('Retry failed:', e));
                }, 100);
              });
            }
          }, 400); // Half of the transition duration for smooth overlap
        }
      }

      function updateActiveTab(activeTab) {
        document.querySelectorAll('.demo-tab').forEach(tab => {
          tab.classList.remove('active');
        });
        activeTab.classList.add('active');
      }

      // Tab event listeners
      if (rgbTab) {
        rgbTab.addEventListener('click', function() {
          switchVideo('rgb');
          updateActiveTab(rgbTab);
        });
      }

      if (intelTab) {
        intelTab.addEventListener('click', function() {
          switchVideo('intel');
          updateActiveTab(intelTab);
        });
      }

      if (efferenceTab) {
        efferenceTab.addEventListener('click', function() {
          switchVideo('efference');
          updateActiveTab(efferenceTab);
        });
      }
    });

    // Camera slideshow functionality
    document.addEventListener('DOMContentLoaded', function() {
      const cameraImages = document.querySelectorAll('.camera-slideshow .camera-image');
      let currentImageIndex = 0;

      if (cameraImages.length > 1) {
        setInterval(function() {
          // Remove active class from current image
          cameraImages[currentImageIndex].classList.remove('active');
          
          // Move to next image
          currentImageIndex = (currentImageIndex + 1) % cameraImages.length;
          
          // Add active class to new image
          cameraImages[currentImageIndex].classList.add('active');
        }, 3000); // Switch every 3 seconds
      }
    });
  </script>
</body>
</html>